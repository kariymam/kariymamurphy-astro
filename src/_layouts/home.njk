{% extends 'src/_layouts/base.njk' %}

{% block intro %}
<section id="intro" class="mx-auto p-6 lg:p-10 hero-bg-image">
  <h2 class="max-w-prose text-5xl">
    {{ content | safe }}
  </h2>
</section>
{% endblock %}

{% block featuredPosts %}
{% set featuredPosts = collections.featuredPosts %}
{% set featuredPostsCount = featuredPosts | length %}
<section id="featured_posts" class="flex flex-col w-full gap-2 lg:gap-0 -mt-0.5">
      {% include "postlist-featured.njk" %}
  </section>
{% endblock %}

{% block portfolio %}
{% set projects = collections.project %}
  <ol id="portfolio" role="list" reversed class="postlist m-6 lg:px-6 lg:py-0 gap-2 lg:mx-auto" style="counter-reset: start-from {{ (portfolio.length) + 1 }};">
  <li>
    <h3 class="border p-6 rounded-3xl h-full text-5xl">
      Recent work
    </h3>
  </li>
    {% asyncEach project in projects | reverse %}
      {% set articleUrl = project.url %}
      {% set articleDate = project.date %}
      {% set articleTitle = project.data.title %}
      {% set articleDescription = project.data.description %}
      {% set articleImg = project.data.thumb %}
      {% set articleImgAlt = project.data.thumbAlt %}
      {% set articleTags = project.data.tags %}
      {% set articleLink = project.data.externalLink %}
      {% include "_partials/card.njk" %}
    {% endeach %}
  </ol>
{% endblock %}

{% block latestPosts %}
<hr>
{% set postslist = collections.posts | head(-1 * numberOfLatestPostsToShow) %}
<section id="other_posts" class="postlist m-6 lg:px-6 lg:py-0 gap-2 lg:mx-auto">
  <h3 class="border p-6 rounded-3xl h-full text-5xl">
    Latest posts
  </h3>
    {% set postsCount = collections.posts | length %}
    {% set morePosts = postsCount - numberOfLatestPostsToShow %}
    <div class="grid-col">
      <ol reversed class="list-none postlist-lite mx-6 lg:mx-auto" style="counter-reset: start-from {{ (postslistCounter or postslist.length) + 1 }}">
        {% asyncEach post in postslist | reverse %}
          {% set articleUrl = post.url %}
          {% set articleDate = post.date %}
          {% set articleTitle = post.data.title %}
          {% set articleDescription = post.data.description %}
          {% set articleImg = post.data.thumb %}
          {% set articleImgAlt = post.data.thumbAlt %}
          {% set articleTags = post.data.tags %}
          {% set articleLink = post.data.externalLink %}
          {% include "_partials/list.njk" %}
        {% endeach %}
        </ol>
    </div>
    {% if numberOfLatestPostsToShow %}
      {% if morePosts > 0 %}
      <a href="/blog/" class="border p-6 mb-6 rounded-3xl h-full">
          See more in Blog
      </a>
      {% endif %}
    {% endif %}
</section>
{% endblock %}

